# Volcano Engine LLM Configuration for Financial Data Collector

# Web crawler with Volcano Engine LLM
web_crawler:
  class: "src.financial_data_collector.core.crawler.web_crawler.WebCrawler"
  enabled: true
  dependencies: ["config_manager"]
  startup_order: 2
  shutdown_order: 8
  
  config:
    # Basic browser configuration
    browser:
      browser_type: "chromium"
      headless: true
      viewport:
        width: 1920
        height: 1080
      user_agent: "Financial Data Collector 1.0"
    
    # Extraction strategy
    extraction_strategy: "llm"  # Use LLM extraction
    request_delay: 1.0
    max_retries: 3
    timeout: 30
    max_concurrent_requests: 5
    
    # Volcano Engine LLM configuration
    llm_config:
      provider: "volc"  # Use Volcano Engine
      api_key: "${VOLC_API_KEY}"  # Your Volcano Engine API key
      base_url: "${VOLC_BASE_URL}"  # Your Volcano Engine base URL
      model: "ep-20250725215501-7zrfm"  # Your custom model endpoint
      instruction: |
        Extract financial data from the webpage. Focus on:
        1. Stock prices, volume, and market data
        2. Company information and financial metrics
        3. News articles and financial reports
        4. Market trends and analysis
        
        Return structured data with clear categorization of financial information.
      schema:
        type: "object"
        properties:
          stock_data:
            type: "object"
            properties:
              symbol: {"type": "string"}
              price: {"type": "number"}
              volume: {"type": "number"}
              change: {"type": "number"}
              change_percent: {"type": "number"}
              market_cap: {"type": "number"}
              pe_ratio: {"type": "number"}
              dividend_yield: {"type": "number"}
          news:
            type: "array"
            items:
              type: "object"
              properties:
                title: {"type": "string"}
                summary: {"type": "string"}
                timestamp: {"type": "string"}
                url: {"type": "string"}
                sentiment: {"type": "string", "enum": ["positive", "negative", "neutral"]}
          company_info:
            type: "object"
            properties:
              name: {"type": "string"}
              sector: {"type": "string"}
              industry: {"type": "string"}
              description: {"type": "string"}
              employees: {"type": "number"}
              headquarters: {"type": "string"}
          market_data:
            type: "object"
            properties:
              market_cap: {"type": "number"}
              enterprise_value: {"type": "number"}
              price_to_earnings: {"type": "number"}
              price_to_sales: {"type": "number"}
              price_to_book: {"type": "number"}
              debt_to_equity: {"type": "number"}
    
    # Financial data specific selectors (fallback for CSS extraction)
    financial_selectors:
      price: [".price", ".quote-price", "[data-testid*='price']", "[data-field='regularMarketPrice']"]
      volume: [".volume", ".quote-volume", "[data-testid*='volume']", "[data-field='regularMarketVolume']"]
      change: [".change", ".quote-change", "[data-testid*='change']", "[data-field='regularMarketChange']"]
      market_cap: [".market-cap", ".market-value", "[data-testid*='market-cap']", "[data-field='marketCap']"]
      news: [".news-item", ".article", ".story", ".financial-news"]
      financial_data: [".financial-data", ".market-data", ".quote-data"]
    
    # Enhanced features (optional)
    enhanced:
      proxy_pool:
        enabled: false  # Disable for demo
      captcha_solving:
        enabled: false  # Disable for demo
      anti_detection:
        enabled: true
        user_agent_rotation: true
        random_delays: true
        min_delay: 1.0
        max_delay: 3.0
      task_scheduling:
        enabled: false  # Execute immediately for demo
      incremental_crawling:
        enabled: false  # Disable for demo
      monitoring:
        enabled: true
        alert_thresholds:
          success_rate: 0.5
          response_time: 30.0
          block_rate: 0.1

# Health check configuration
health_check:
  enabled: true
  interval: 60
  timeout: 15
  checks:
    - name: "llm_connection"
      enabled: true
    - name: "browser_functionality"
      enabled: true
